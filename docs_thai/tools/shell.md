# เครื่องมือเชลล์

เอกสารนี้อธิบายเครื่องมือ `run_shell_command` ที่ใช้สำหรับการรันคำสั่งเชลล์

## ภาพรวม

เครื่องมือ `run_shell_command` ช่วยให้โมเดล Gemini สามารถดำเนินการคำสั่งเชลล์ได้ เครื่องมือนี้มีประโยชน์สำหรับงานต่างๆ เช่น การสร้างโครงการ การรันการทดสอบ การติดตั้งแพ็คเกจ และการดำเนินการระบบอื่นๆ

## คุณสมบัติ

### การรันคำสั่งที่หลากหลาย
- รองรับคำสั่งระบบปฏิบัติการที่แตกต่างกัน
- สามารถรันคำสั่งซับซ้อนและ pipeline
- รองรับการส่งผ่านตัวแปรสภาพแวดล้อม

### การจัดการความปลอดภัย
- ต้องการการยืนยันจากผู้ใช้ก่อนการดำเนินการ
- แสดงคำสั่งที่จะรันให้ผู้ใช้ตรวจสอบ
- จำกัดการเข้าถึงคำสั่งที่อันตราย

## พารามิเตอร์

### ข้อมูลเข้า
- `command` (string, required): คำสั่งที่ต้องการรัน
- `workingDirectory` (string, optional): ไดเร็กทอรีทำงาน
- `timeout` (number, optional): เวลา timeout ในวินาที (default: 30)
- `env` (object, optional): ตัวแปรสภาพแวดล้อมเพิ่มเติม

### ข้อมูลออก
- `stdout`: ผลลัพธ์มาตรฐาน
- `stderr`: ข้อความข้อผิดพลาด
- `exitCode`: รหัสการออกของคำสั่ง
- `executionTime`: เวลาที่ใช้ในการดำเนินการ

## ตัวอย่างการใช้งาน

### การจัดการแพ็คเกจ

```
ติดตั้ง npm package: express, cors, dotenv
```

```
อัปเดตแพ็คเกจทั้งหมดในโครงการ
```

### การรันการทดสอบ

```
รันการทดสอบ unit tests ด้วย npm test
```

```
รันการทดสอบเฉพาะไฟล์ auth.test.js
```

### การ Build และ Deploy

```
สร้าง production build ด้วย npm run build
```

```
ตรวจสอบสถานะ git และ commit การเปลี่ยนแปลง
```

### การจัดการไฟล์และโฟลเดอร์

```
สร้างโฟลเดอร์ src/components และ src/utils
```

```
คัดลอกไฟล์ template จาก templates/ ไปยัง src/
```

## ข้อจำกัดและความปลอดภัย

### ข้อจำกัด
- เวลา timeout สูงสุด: 300 วินาที
- ขนาดผลลัพธ์สูงสุด: 10MB
- ไม่อนุญาตคำสั่งที่เป็นอันตราย

### การรักษาความปลอดภัย
- ตรวจสอบคำสั่งก่อนการดำเนินการ
- ป้องกันการรันคำสั่งระบบที่อันตราย
- จำกัดการเข้าถึงไฟล์และโฟลเดอร์

### คำสั่งที่ถูกจำกัด
- คำสั่งที่แก้ไขการตั้งค่าระบบ
- การลบไฟล์สำคัญ
- การเข้าถึงข้อมูลละเอียดอ่อน

## การจัดการข้อผิดพลาด

### ประเภทข้อผิดพลาด
- **คำสั่งไม่พบ**: ตรวจสอบการติดตั้งและ PATH
- **ไม่มีสิทธิ์**: ตรวจสอบสิทธิ์การเข้าถึง
- **Timeout**: เพิ่มเวลา timeout หรือปรับปรุงคำสั่ง
- **Exit code ไม่เป็น 0**: ตรวจสอบ stderr สำหรับข้อผิดพลาด

### การแก้ไขปัญหา
- ตรวจสอบ working directory
- ตรวจสอบตัวแปรสภาพแวดล้อม
- ลองรันคำสั่งในเทอร์มินัลปกติ
- ตรวจสอบ dependencies ที่จำเป็น

## เคล็ดลับและแนวทางปฏิบัติที่ดี

### การเขียนคำสั่งที่มีประสิทธิภาพ
- ใช้ absolute path เมื่อจำเป็น
- ตรวจสอบสภาพแวดล้อมก่อนรันคำสั่ง
- ใช้ error handling ที่เหมาะสม

### การใช้งานร่วมกับเครื่องมืออื่น
- ใช้ `read_file` เพื่ออ่านไฟล์การกำหนดค่า
- ใช้ `write_file` เพื่อสร้างสคริปต์
- ใช้ `list_directory` เพื่อตรวจสอบผลลัพธ์

## ตัวอย่างขั้นสูง

### การตั้งค่าโครงการใหม่

```
สร้างโครงการ Next.js ใหม่พร้อมกับ TypeScript และ Tailwind CSS
```

### การ Deployment

```
สร้าง Docker image และ push ไปยัง registry
```

### การจัดการฐานข้อมูล

```
รัน database migrations และ seed data
```

### การ Monitoring และ Analytics

```
ตรวจสอบ system performance และ log analysis
```
